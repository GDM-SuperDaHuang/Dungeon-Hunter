## TObjectPtr<UObject>
    eg:
    TObjectPtr<USomeOtherComponent> StrongComp;

1. 行为：相当于传统的 UPROPERTY() UObject*，它会增加目标对象的 GC 引用计数。
2. 销毁时：
    1) 如果只有这个 MyComponent 强引用了 SomeOtherComponent，当 MyComponent 被销毁时，引用计数减1。
    2) 如果此时 SomeOtherComponent 没有其他强引用，它也会随之被 GC 回收（可能不是立即，而是下次 GC 时）。

3. 形成循环会阻止。

        eg: 
        // MyComponentA.h
        UPROPERTY()
        TObjectPtr<UMyComponentB> CompB;
   

        // MyComponentB.h
        UPROPERTY()
        TObjectPtr<UMyComponentA> CompA;

   1) A 强引用 B，B 强引用 A，形成循环,即使 Actor 被 Destroy，这两个组件的 GC 引用计数永远不会降到0，内存泄漏，组件永远不会被垃圾回收。
   2) 解决方法：A或者B其中一个使用TWeakObjectPtr


    eg:
    UPROPERTY()
    TArray<TObjectPtr<UMyComponent>> ComponentArray;
    
    // 某个地方错误地把自身加进了数组
    ComponentArray.Add(this);

1) 组件强引用了自己 → 引用计数永远 ≥1 → 无法销毁。
2) 解决方法：容器中不要加入自身或形成循环。


## TWeakObjectPtr<UObject>（弱指针）
    eg:
    TWeakObjectPtr<USomeOtherComponent> WeakComp;
1. 行为：不增加引用计数，只保存一个弱引用。
2. 销毁时：
   1) 如果 SomeOtherComponent 先被销毁，WeakComp->IsValid() 会返回 false，Get() 返回 nullptr。
   2) MyComponent 被销毁时，WeakComp 自动变为无效，不影响任何对象。

## 裸 UObject*（不带 UPROPERTY，非推荐）
    eg:
    USomeOtherComponent* RawPtr;  // 没有 UPROPERTY
1. 行为：不参与 GC 管理。
2. 销毁时：
    1) 如果 SomeOtherComponent 先被销毁，RawPtr 变成悬空指针（dangling pointer）。
    2) 后续访问 RawPtr->Anything() 会导致崩溃（访问已释放内存）。

## TSharedPtr<NonUObjectStruct>（非 UObject 的共享指针）
    eg:
    TSharedPtr<FMyBigStruct> SharedStruct;
1. 行为：引用计数管理，非 GC 系统。
2. 销毁时：
   1) MyComponent 销毁时，SharedStruct 的引用计数减1。
   2) 如果此时计数降为0，结构体内存自动 delete。
   3) 如果还有其他地方持有共享指针，结构体继续存活。
3. 不要指向UObject

## TSoftObjectPtr<UObject>（软资源引用）
    eg:
    UPROPERTY()
    TSoftObjectPtr<UStaticMesh> SoftMesh;
1. 行为：不硬加载资源，只保存路径。加载后内部可能持有硬引用。
2. 销毁时：
   1) MyComponent 销毁时，软引用自动清除。 
   2) 如果之前调用了 LoadSynchronous() 或异步加载完成了，内部会短暂硬引用资源，但 UPROPERTY 会正确清理。


## UObject 由 UE 的 GC 统一管理
进行方法体内：
 UObject* Obj = NewObject<UObject>(); 不需要delect
而 MyClass* A = new MyClass(); 则需要delect


## GC
### 判定“是否被回收”的真正条件
1. GC Root 包括：
    1) UWorld
    2) GameInstance
    3) Engine
    4) AddToRoot 的对象
    5) 正在序列化 / 正在运行中的 UObject